<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f0f23">
  <title>Maths - Felix Academy</title>
  <link rel="stylesheet" href="../../shared/base.css">
  <link rel="stylesheet" href="math.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@2.0.8/dist/lottie-player.js"></script>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>

  <div id="lottie-overlay" class="lottie-overlay hidden">
    <lottie-player id="lottie-player" speed="1" style="width:200px;height:200px;"></lottie-player>
  </div>

  <div id="app">
    <!-- Level Select Screen -->
    <section id="screen-levels" class="screen active">
      <nav class="screen-nav">
        <a href="../index.html" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
          Accueil
        </a>
      </nav>
      <header class="math-header">
        <h1 class="math-title">Maths</h1>
        <p class="math-subtitle">Du coll√®ge au lyc√©e, deviens un pro !</p>
        <div class="math-stats-bar" id="math-stats-bar">
          <div class="math-stat">
            <span class="math-stat-num" id="mstat-mastered">0</span>
            <span class="math-stat-label">ma√Ætris√©s</span>
          </div>
          <div class="math-stat">
            <span class="math-stat-num" id="mstat-learning">0</span>
            <span class="math-stat-label">en cours</span>
          </div>
          <div class="math-stat">
            <span class="math-stat-num" id="mstat-accuracy">-</span>
            <span class="math-stat-label">pr√©cision</span>
          </div>
        </div>
      </header>
      <div id="math-level-grid" class="level-grid"></div>
    </section>

    <!-- Game Session Screen -->
    <section id="screen-session" class="screen">
      <div class="session-topbar">
        <button class="btn-back" id="btn-back-levels">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
        </button>
        <div class="quiz-progress-bar">
          <div class="quiz-progress-fill" id="math-progress-fill"></div>
        </div>
        <div class="session-streak-pill" id="math-streak-pill">
          <span>üî•</span>
          <span id="math-streak-count">0</span>
        </div>
      </div>
      <div class="session-question-count">
        <span id="math-current">1</span> / <span id="math-total">15</span>
      </div>
      <div id="math-game-container" class="game-container"></div>
    </section>

    <!-- Results Screen -->
    <section id="screen-results" class="screen">
      <div class="results-card">
        <div id="math-results-lottie" class="results-lottie"></div>
        <h2 id="math-results-title"></h2>
        <div class="results-score">
          <span id="math-results-score-num"></span><span class="results-divider">/</span><span id="math-results-score-total"></span>
        </div>
        <p id="math-results-message"></p>
        <div id="math-results-xp" class="results-xp"></div>
        <div class="results-actions">
          <button class="btn btn-primary" id="math-btn-retry">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
            Continuer
          </button>
          <button class="btn btn-secondary" id="math-btn-levels">Choisir un niveau</button>
          <a href="../index.html" class="btn btn-ghost">Retour √† l'accueil</a>
        </div>
      </div>
    </section>
  </div>

  <script type="module" src="math.js"></script>
  <script type="module" src="../../shared/bug-report/bug-widget.js?v=7"></script>
</body>
</html>
