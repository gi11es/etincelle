<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=1771447445">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f0f23">
  <title>Felix Academy</title>
  <link rel="stylesheet" href="../shared/base.css?v=1771447445">
  <link rel="stylesheet" href="portal.css?v=1771447445">
</head>
<body>
  <canvas id="confetti-canvas"></canvas>

  <div id="app">
    <nav class="portal-nav">
      <a href="../index.html" class="btn-back" id="btn-switch-user">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
        Famille
      </a>
    </nav>

    <header class="portal-header">
      <div class="portal-glow"></div>
      <h1 class="portal-title">Felix Academy</h1>
      <p class="portal-subtitle">Apprends en t'amusant !</p>
      <div class="xp-bar-container" id="xp-bar-container">
        <div class="xp-bar-info">
          <span class="xp-level" id="xp-level">Niveau 1</span>
          <span class="xp-amount" id="xp-amount">0 XP</span>
        </div>
        <div class="xp-bar">
          <div class="xp-bar-fill" id="xp-bar-fill"></div>
        </div>
      </div>
      <div class="streak-badge" id="streak-badge">
        <span class="streak-fire">ğŸ”¥</span>
        <span class="streak-count" id="streak-count">0</span>
        <span class="streak-label">jours</span>
      </div>
    </header>

    <div class="portal-grid">
      <a href="quiz-livre/index.html" class="portal-card portal-card--quiz">
        <div class="portal-card-icon">ğŸ“š</div>
        <div class="portal-card-info">
          <h2>Quiz Livre</h2>
          <p>Teste tes connaissances sur tes lectures</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>

      <a href="english/index.html" class="portal-card portal-card--english">
        <div class="portal-card-icon">ğŸ‡¬ğŸ‡§</div>
        <div class="portal-card-info">
          <h2>English</h2>
          <p>Apprends l'anglais en t'amusant</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>

      <a href="espagnol/index.html" class="portal-card portal-card--espagnol">
        <div class="portal-card-icon">ğŸ‡ªğŸ‡¸</div>
        <div class="portal-card-info">
          <h2>EspaÃ±ol</h2>
          <p>Apprends l'espagnol en t'amusant</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>

      <a href="math/index.html" class="portal-card portal-card--math">
        <div class="portal-card-icon">ğŸ§®</div>
        <div class="portal-card-info">
          <h2>Maths</h2>
          <p>MaÃ®trise les maths du collÃ¨ge au lycÃ©e</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>

      <a href="geo/index.html" class="portal-card portal-card--geo">
        <div class="portal-card-icon">ğŸŒ</div>
        <div class="portal-card-info">
          <h2>GÃ©ographie</h2>
          <p>Explore le monde en t'amusant</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>

      <a href="stats/index.html" class="portal-card portal-card--stats">
        <div class="portal-card-icon">ğŸ“Š</div>
        <div class="portal-card-info">
          <h2>Statistiques</h2>
          <p>Suis ta progression et tes badges</p>
        </div>
        <div class="portal-card-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      </a>
    </div>

    <div class="portal-badges" id="portal-badges"></div>
  </div>

  <!-- â•â•â• Mascot â•â•â• -->
  <div id="mascot">
    <div id="mascot-bubble"></div>
    <div id="mascot-avatar"></div>
  </div>

  <script type="module" src="portal.js?v=1771447445"></script>
  <script type="module" src="../shared/bug-report/bug-widget.js?v=1771447445"></script>
  <script>
  (function() {
    const isChess = Math.random() < 0.5;
    const emoji = isChess ? 'â™Ÿï¸' : 'âš½';
    const colorGlow = isChess ? 'rgba(168, 85, 247, 0.35)' : 'rgba(34, 197, 94, 0.35)';
    const colorBorder = isChess ? '#c084fc' : '#4ade80';
    const factsUrl = isChess ? 'mascot/chess-facts.json' : 'mascot/football-facts.json';

    const avatarEl = document.getElementById('mascot-avatar');
    const bubbleEl = document.getElementById('mascot-bubble');
    avatarEl.textContent = emoji;
    avatarEl.style.setProperty('--mascot-glow', colorGlow);
    bubbleEl.style.setProperty('--bubble-border', colorBorder);

    let facts = [];
    let shownIndices = [];

    fetch(factsUrl).then(r => r.json()).then(data => { facts = data; });

    function getRandomFact() {
      if (!facts.length) return 'Chargementâ€¦';
      if (shownIndices.length >= facts.length) shownIndices = [];
      let idx;
      do { idx = Math.floor(Math.random() * facts.length); } while (shownIndices.includes(idx));
      shownIndices.push(idx);
      return facts[idx];
    }

    function showFact() {
      bubbleEl.textContent = getRandomFact();
      bubbleEl.classList.add('visible');
      avatarEl.classList.add('talking');
      clearTimeout(bubbleEl._timer);
      bubbleEl._timer = setTimeout(() => {
        bubbleEl.classList.remove('visible');
        avatarEl.classList.remove('talking');
      }, 5000);
    }

    avatarEl.addEventListener('click', showFact);

    setTimeout(() => {
      bubbleEl.textContent = isChess
        ? 'Salut ! Clique sur moi pour un fun fact Ã©checs â™Ÿï¸'
        : 'Hey ! Clique sur moi pour un fun fact foot âš½';
      bubbleEl.classList.add('visible');
      setTimeout(() => bubbleEl.classList.remove('visible'), 4000);
    }, 1500);
  })();
  </script>
</body>
</html>
