<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f0f23">
  <title>Quiz Livre - Felix Academy</title>
  <link rel="stylesheet" href="../../shared/base.css">
  <link rel="stylesheet" href="quiz-livre.css">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@2.0.8/dist/lottie-player.js"></script>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>

  <div id="lottie-overlay" class="lottie-overlay hidden">
    <lottie-player id="lottie-player" speed="1" style="width:200px;height:200px;"></lottie-player>
  </div>

  <div id="app">
    <!-- Home Screen: Book Selection -->
    <section id="screen-home" class="screen active">
      <nav class="screen-nav">
        <a href="../index.html" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
          Accueil
        </a>
      </nav>
      <header class="hero">
        <div class="hero-glow"></div>
        <h1 class="hero-title">Quiz Livre</h1>
        <p class="subtitle">Teste tes connaissances sur tes lectures !</p>
      </header>
      <div id="book-grid" class="book-grid"></div>
    </section>

    <!-- Book Screen: Mode Selection -->
    <section id="screen-book" class="screen">
      <nav class="screen-nav">
        <button class="btn-back" id="btn-back-home">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
          Livres
        </button>
      </nav>
      <div id="book-header" class="book-header"></div>
      <div class="mode-grid">
        <button class="mode-card" data-mode="qcm">
          <div class="mode-icon-wrap mode-icon--blue"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r=".5"/></svg></div>
          <span class="mode-label">QCM</span>
          <span class="mode-desc">Choix multiples</span>
        </button>
        <button class="mode-card" data-mode="vraiOuFaux">
          <div class="mode-icon-wrap mode-icon--green"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg></div>
          <span class="mode-label">Vrai ou Faux</span>
          <span class="mode-desc">C'est vrai ou c'est faux ?</span>
        </button>
        <button class="mode-card" data-mode="quiSuisJe">
          <div class="mode-icon-wrap mode-icon--purple"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
          <span class="mode-label">Qui suis-je ?</span>
          <span class="mode-desc">Devine le personnage</span>
        </button>
        <button class="mode-card" data-mode="ordre">
          <div class="mode-icon-wrap mode-icon--orange"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 5v14M5 12l7 7 7-7"/></svg></div>
          <span class="mode-label">Dans l'ordre</span>
          <span class="mode-desc">Replace les événements</span>
        </button>
        <button class="mode-card" data-mode="associations">
          <div class="mode-icon-wrap mode-icon--pink"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></div>
          <span class="mode-label">Associations</span>
          <span class="mode-desc">Relie les paires</span>
        </button>
        <button class="mode-card" data-mode="texteATrous">
          <div class="mode-icon-wrap mode-icon--teal"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/></svg></div>
          <span class="mode-label">Texte à trous</span>
          <span class="mode-desc">Complète les phrases</span>
        </button>
        <button class="mode-card mode-card--surprise" data-mode="surprise">
          <div class="mode-icon-wrap mode-icon--gold"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div>
          <span class="mode-label">Quiz Surprise</span>
          <span class="mode-desc">Un peu de tout !</span>
        </button>
      </div>
      <div id="best-scores" class="best-scores"></div>
    </section>

    <!-- Quiz Screen -->
    <section id="screen-quiz" class="screen">
      <div class="quiz-topbar">
        <button class="btn-back" id="btn-back-book">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
        </button>
        <div class="quiz-progress-bar">
          <div class="quiz-progress-fill" id="quiz-progress-fill"></div>
        </div>
        <div class="quiz-score-pill">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          <span id="quiz-score">0</span>
        </div>
      </div>
      <div class="quiz-question-count">
        Question <span id="quiz-current">1</span> sur <span id="quiz-total">10</span>
      </div>
      <div id="quiz-container" class="quiz-container"></div>
    </section>

    <!-- Results Screen -->
    <section id="screen-results" class="screen">
      <div class="results-card">
        <div id="results-lottie" class="results-lottie"></div>
        <h2 id="results-title"></h2>
        <div class="results-score">
          <span id="results-score-num"></span><span class="results-divider">/</span><span id="results-score-total"></span>
        </div>
        <p id="results-message"></p>
        <div class="results-stars" id="results-stars"></div>
        <div id="results-xp" class="results-xp"></div>
        <div class="results-actions">
          <button class="btn btn-primary" id="btn-retry">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
            Rejouer
          </button>
          <button class="btn btn-secondary" id="btn-other-mode">Autre mode</button>
          <button class="btn btn-ghost" id="btn-home">Retour aux livres</button>
        </div>
      </div>
    </section>
  </div>

  <script type="module" src="quiz-livre.js"></script>
</body>
</html>
